{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'img_list.css' %}">



<div class='btn_list'>

    <div class="btn-group" role="group" aria-label="Basic outlined example">
        <button type="button" class="btn btn-outline-primary" onclick="filterImages('all')">전체</button>
        <button type="button" class="btn btn-outline-primary" onclick="filterImages('gif')">GIF</button>
        <button type="button" class="btn btn-outline-primary" onclick="filterImages('normal')">일반</button>
    </div>
    
    <form method="get" action="{% url 'img:image_list' %}" class="select">
        <select name="items_per_page" id="items_per_page">
            <option value="25" {% if items_per_page == 25 %}selected{% endif %}>25</option>
            <option value="50" {% if items_per_page == 50 %}selected{% endif %}>50</option>
            <option value="75" {% if items_per_page == 70 %}selected{% endif %}>75</option>
            <option value="100" {% if items_per_page == 100 %}selected{% endif %}>100</option>
        </select>
        <input type="submit" value="적용">
    </form>
</div>
<ul class='navbox' id='imageList'>
    {% for image in image_items %}
        <li class='img_box' data-category="{{ image.category }}">
            <div>
                <img src="{{ image.image.url }}" alt="Image">
            </div>
            <div class="hashtags">
                <p>{% for hashtag in image.hashtags.all %}
                    <span>{{ hashtag.name }} </span>
                {% endfor %}</p>
            </div>
        </li> 
    {% empty %}
        <p>등록된 이미지가 없습니다.</p>
    {% endfor %}
</ul>
<div id="overlay">
    <span id="download-button">다운로드</span>
</div>


{% comment %} 오킹의 밥줄 {% endcomment %}

<div class="accordion" id="accordionPanelsStayOpenExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="panelsStayOpen-headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
          밥줄
        </button>
      </h2>
      <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
        {% comment %} 밥줄 내용 {% endcomment %}
        <div class="accordion-body">
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                    오킹의 생방송 <img src='../../media\design\로고\트위치.png' class='logo'>
                  </button>
                </h2>
                <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
                <div class="accordion-body">
                    <a href='https://www.twitch.tv/obm1025'>
                        <img src ='../../media\design\프사\트위치 프사.jpg' class='profile'>오킹 트위치 생방송
                    </a>
                    
                    <a href='https://twip.kr/obm1025'>
                        <img src ='../../media\design\프사\도네이션.PNG' class='profile'>오킹 도네이션
                    </a>

                    <a href='https://toon.at/donate/636948034831794621'>
                        <img src ='../../media\design\프사\투네이션.PNG' class='profile'>오킹 투네이션
                    </a>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
                    오킹의 유튜브 <img src='../../media\design\로고\유튜브.avif' class='logo'>
                  </button>
                </h2>
                <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThree">
                <div class="accordion-body">
                    <a href='https://www.youtube.com/@oking1025'>
                        <img src='../../media\design\프사\유튜브 프사.jpg'class='profile'>오킹 유튜브
                    </a>

                    <a href='https://www.youtube.com/@oking_replay'>
                        <img src='../../media\design\프사\다시보기 프사.jpg'class='profile'>오킹의 생방송 다시보기
                    </a> 

                    <a href='https://www.youtube.com/@oking_game'>
                        <img src ='../../media\design\프사\오락킹.jpg' class='profile'>오락킹
                    </a>
                    
                    <a href='https://www.youtube.com/@oking_shorts'>
                        <img src ='../../media\design\프사\숏킹.jpg' class='profile'>숏킹 유튜브
                    </a>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
                    오킹의 SNS  <img src='../../media\design\로고\인스타로고.png' class='logo'>
                  </button>
                </h2>
                <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThree">
                <div class="accordion-body">

                    <a href='https://cafe.naver.com/okingrooftop'>
                        <img src ='../../media\design\프사\옼탑방.png' class='profile'>옼탑방 팬카페
                    </a>
            
                    <a href='https://www.instagram.com/oking1025/'>
                        <img src ='../../media\design\프사\인스타 프사.jpg' class='profile'>오킹 인스타
                    </a>
                
                    <a href='https://www.facebook.com/oking1025'>
                        <img src='../../media\design\프사\유튜브 프사.jpg'class='profile'>오킹 페이스북
                    </a>
                    
                    <a href='https://www.tiktok.com/@oking1025?lang=ko-KR'>
                        <img src='../../media\design\프사\틱톡 프사.jpg'class='profile'>오킹 틱톡
                    </a>
                </div>
              </div>
        </div>
      </div>
    </div>
   
</div>




<script>
    function filterImages(category) {
        var images = document.querySelectorAll('.img_box');
        images.forEach(function (img) {
            var imgCategory = img.getAttribute('data-category');
            var imgSrc = img.querySelector('img').getAttribute('src');

            if (category === 'all' || (category === 'gif' && imgSrc.endsWith('.gif')) || (category === 'normal' && !imgSrc.endsWith('.gif'))) {
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }
        });
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // 이미지 클릭 시 확대되도록 하는 코드
        var images = document.querySelectorAll('.img_box img');
        var overlay = document.getElementById('overlay');
        var overlayImg = document.createElement('img');
        overlayImg.classList.add('overlay-img');
        overlay.appendChild(overlayImg);

        images.forEach(function (img) {
            img.addEventListener('click', function () {
                overlayImg.src = img.src;
                overlay.style.display = 'flex';
            });
        });

        // 다운로드 버튼 클릭 시 이미지 다운로드
        var downloadButton = document.getElementById('download-button');
        downloadButton.addEventListener('click', function () {
            var link = document.createElement('a');
            link.href = overlayImg.src;
            link.download = 'image.jpg';
            link.click();
        });

        // 오버레이 영역 클릭 시 확대 이미지 숨기기
        overlay.addEventListener('click', function () {
            overlay.style.display = 'none';
        });
    });
</script>
{% endblock content %}
