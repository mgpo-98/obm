{% extends 'base.html' %}
{% load django_bootstrap5 %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

<h1>실시간 검색어 순위</h1>
    <ul id="searchRanking"></ul>


    <script>
        function updateSearchRank() {
          // 서버에 요청하여 검색어 순위 갱신
          $.ajax({
            url: '/',
            method: 'GET',
            success: function (data) {
              // 받아온 순위로 리스트 갱신
              updateRankList(data.rank);
            },
            error: function () {
              console.error('검색어 순위를 가져오는 중 오류가 발생했습니다.');
            }
          });
        }
      
        function updateRankList(rank) {
          // 순위 리스트 업데이트
          const searchRankList = $('#searchRankList');
          searchRankList.empty();
      
          rank.forEach(function (keyword, index) {
            searchRankList.append('<li>' + (index + 1) + '. ' + keyword + '</li>');
          });
        }
      
        // 일정 간격으로 검색어 순위 업데이트
        setInterval(updateSearchRank, 5000);  // 5초마다 업데이트
      
        // 페이지 로딩시 초기 검색어 순위 설정
        updateSearchRank();
      </script>


{% endblock content %}